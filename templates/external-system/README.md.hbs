# {{displayName}}

{{description}}

## System Information

- **System Key**: `{{systemKey}}`
- **System Type**: `{{systemType}}`
- **Datasources**: {{datasourceCount}}

## Files

- `variables.yaml` – Application configuration with `app` and `externalIntegration` blocks
- `{{systemKey}}-system.json` – External system definition (authentication, OpenAPI/MCP, RBAC)
{{#each datasources}}
- `{{fileName}}` – Datasource: {{displayName}}
{{/each}}
- `env.template` – Environment variables template (secrets, API keys)
- `{{systemKey}}-deploy.json` – Deployment manifest (generated by `aifabrix json`)

Optional: `rbac.yaml` – Roles and permissions merged into the system when present.

## Quick Start

### 1. Create External System

```bash
aifabrix create {{appName}} --type external
```

Or use the interactive wizard:

```bash
aifabrix wizard --app {{appName}}
```

### 2. Configure Authentication and Datasources

Edit files in `integration/{{appName}}/`:

- **Authentication**: `{{systemKey}}-system.json` (auth type, credentials placeholders)
- **Field mappings**: `{{systemKey}}-datasource-*.json` (dimensions, attributes, operations)

### 3. Validate Configuration

```bash
aifabrix validate {{appName}} --type external
```

### 4. Generate Deployment Manifest

```bash
aifabrix json {{appName}} --type external
```

This creates `{{systemKey}}-deploy.json` in `integration/{{appName}}/`.

### 5. Deploy

Controller URL and environment are read from config. Configure and log in first:

```bash
aifabrix auth config --set-controller <url> --set-environment dev
aifabrix login
```

Then deploy:

```bash
aifabrix deploy {{appName}}
```

## Testing

### Unit Tests (Local Validation, No API)

```bash
aifabrix test {{appName}}
```

### Integration Tests (Via Dataplane)

```bash
aifabrix test-integration {{appName}}
```

## Deployment

Deploy via miso-controller pipeline (same as regular apps). Auth and controller come from `aifabrix login` and `aifabrix auth config`:

```bash
aifabrix deploy {{appName}}
```

## Troubleshooting

- **Validation errors**: Run `aifabrix validate {{appName}} --type external` to see schema and manifest errors.
- **Deployment / auth**: Run `aifabrix auth config --set-controller <url> --set-environment <env>` and `aifabrix login` before `aifabrix deploy`.
- **File not found**: Run commands from the project root (where `package.json` and `integration/` live).
