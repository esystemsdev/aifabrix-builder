{
  "key": "{{systemKey}}",
  "displayName": "{{systemDisplayName}}",
  "description": "{{systemDescription}}",
  "type": "{{systemType}}",
  "enabled": true,
  "authentication": {
    "type": "{{authType}}"{{#if (eq authType "oauth2")}},
    "oauth2": {
      "tokenUrl": "https://api.example.com/oauth/token",
      "clientId": "kv://{{systemKey}}-oauth2-client-id",
      "clientSecret": "kv://{{systemKey}}-oauth2-client-secret",
      "scopes": []
    }{{/if}}{{#if (eq authType "apikey")}},
    "apikey": {
      "headerName": "X-API-Key",
      "key": "kv://{{systemKey}}-api-key"
    }{{/if}}{{#if (eq authType "basic")}},
    "basic": {
      "username": "kv://{{systemKey}}-username",
      "password": "kv://{{systemKey}}-password"
    }{{/if}}
  }{{#if (eq systemType "openapi")}},
  "openapi": {
    "documentKey": "{{systemKey}}-api",
    "autoDiscoverEntities": false
  }{{/if}}{{#if (eq systemType "mcp")}},
  "mcp": {
    "serverUrl": "https://mcp.example.com",
    "toolPrefix": "{{systemKey}}"
  }{{/if}},
  "tags": [],
  "configuration": []{{#if roles}},
  "roles": [
    {{#each roles}}
    {
      "name": "{{name}}",
      "value": "{{value}}",
      "description": "{{description}}"{{#if groups}},
      "groups": [{{#each groups}}"{{this}}"{{#unless @last}}, {{/unless}}{{/each}}]{{/if}}
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ]{{/if}}{{#if permissions}},
  "permissions": [
    {{#each permissions}}
    {
      "name": "{{name}}",
      "roles": [{{#each roles}}"{{this}}"{{#unless @last}}, {{/unless}}{{/each}}],
      "description": "{{description}}"
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ]{{/if}}
}

