{
  "key": "{{datasourceKey}}",
  "displayName": "{{datasourceDisplayName}}",
  "description": "{{datasourceDescription}}",
  "systemKey": "{{systemKey}}",
  "entityType": "{{entityType}}",
  "resourceType": "{{resourceType}}",
  "enabled": true,
  "version": "1.0.0",
  "metadataSchema": {
    "type": "object",
    "properties": {}
  },
  "fieldMappings": {
    "dimensions": {
      {{#if dimensions}}
      {{#each dimensions}}
      "{{@key}}": "{{this}}"{{#unless @last}},{{/unless}}
      {{/each}}
      {{else}}
      "country": "metadata.country",
      "department": "metadata.department"
      {{/if}}
    },
    "attributes": {
      {{#if attributes}}
      {{#each attributes}}
      "{{@key}}": {
        {{#each this}}
        "{{@key}}": {{#if (eq @key "indexed")}}{{this}}{{else}}"{{this}}"{{/if}}{{#unless @last}},{{/unless}}
        {{/each}}
      }{{#unless @last}},{{/unless}}
      {{/each}}
      {{else}}
      "id": {
        "expression": "{{raw.id}}",
        "type": "string",
        "description": "Unique identifier",
        "indexed": true
      },
      "name": {
        "expression": "{{raw.name}}",
        "type": "string",
        "description": "Display name",
        "indexed": false
      }
      {{/if}}
    }
  },
  "exposed": {
    "attributes": ["id", "name"],
    "description": "Exposed attributes for {{datasourceDisplayName}}"
  }{{#if (eq systemType "openapi")}},
  "openapi": {
    "enabled": true,
    "documentKey": "{{systemKey}}-api",
    "baseUrl": "https://api.example.com",
    "resourcePath": "/{{entityType}}",
    "operations": {
      "list": {
        "operationId": "list{{entityType}}",
        "method": "GET",
        "path": "/{{entityType}}"
      },
      "get": {
        "operationId": "get{{entityType}}",
        "method": "GET",
        "path": "/{{entityType}}/{id}"
      }
    },
    "autoRbac": true
  }{{/if}}
}

