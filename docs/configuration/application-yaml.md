# application.yaml (application config)

← [Documentation index](../README.md) · [Configuration](README.md)

Generated by `aifabrix create`. Defines your application. The generator transforms nested keys (e.g. `app.key`, `app.displayName`) into the flat structure used by the deployment API and [application-schema.json](../../lib/schema/application-schema.json). **deploymentKey** is not set in application.yaml; it is managed by Controller internally. See [Deployment key](deployment-key.md).

Application config can be **application.yaml**, **application.yml**, or **application.json** on disk; the CLI accepts any of these. Legacy variables.yaml is renamed to application.yaml on first use.

**Required:** app.key, app.displayName, app.description, app.type, port (except external), image.name, image.registry, image.registryMode (except external), build.language.

**Optional:** app.version, build.dockerfile, **build.context** (canonical app code directory for local and remote: local `run --reload` uses it as the mount path; remote `run --reload` uses it as the Mutagen local path; resolved relative to the directory containing the config file), **build.envOutputPath** (the only persisted `.env` is written here, or to a temp path when not set for run; no `.env` under `builder/<app>/` or `integration/<app>/`), **build.remoteSyncPath** (relative path under user-mutagen-folder for remote sync and Docker `-v`; when unset, defaults to `dev/<appKey>`), requires.database, requires.databases, requires.redis, requires.storage, healthCheck, authentication, roles, permissions, repository, startupCommand, runtimeVersion, scaling, frontDoorRouting, deployment.environment, externalIntegration, configuration (portal UI). Port for the application comes from `port` in application.yaml only (developer-id offset applies when applicable).

**Database requirements:** When `requires.database` is true, use `requires.databases` to list multiple databases (each with a `name`). Any database whose **name ends with `vector`** is treated as a vector store and gets the **pgvector** extension during db-init when you run the app locally. For Azure or managed Postgres, see [Running: Multiple Databases / Vector stores](../running.md#multiple-databases).

## Version and tag

- **app.version** – Semantic version (e.g. `1.0.0`). For regular apps, can be auto-resolved from the image (OCI label `org.opencontainers.image.version` or semver tag) when running or deploying if the template is empty or smaller. Defaults to `1.0.0` when no image or no version in image.
- **image.tag** – Docker image tag (which image to pull).
- **Purpose:** version = product/change semantics; tag = container artifact.
- When running the image, `builder/<app>/application.yaml` is updated with the discovered version.

**Example (minimal):**
```yaml
app:
  key: myapp
  displayName: "My Application"
  description: "Does amazing things"
  type: webapp
image:
  name: myapp
  registry: myacr.azurecr.io
  registryMode: acr
port: 3000
build:
  language: typescript
```

See [env.template](env-template.md), [External integration](external-integration.md), [Secrets and config](secrets-and-config.md).
