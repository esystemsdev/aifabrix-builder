# Environment Configuration
# Defines host values for different deployment contexts
#
# Public Port Support (Docker Context):
# For docker context, any *_PORT variable automatically gets a corresponding *_PUBLIC_PORT
# calculated as: *_PUBLIC_PORT = *_PORT + (developer-id * 100)
# This enables developer-specific host access ports while maintaining internal container ports.
# Example: MISO_PORT=3000 (internal) -> MISO_PUBLIC_PORT=3100 (for developer-id 1)
# The pattern applies to all services (MISO, KEYCLOAK, DB, REDIS, etc.) automatically.

environments:
  docker:
    DB_HOST: postgres
    DB_PORT: 5432  # Internal port (container-to-container). DB_PUBLIC_PORT calculated automatically.
    REDIS_HOST: redis
    REDIS_PORT: 6379  # Internal port (container-to-container). REDIS_PUBLIC_PORT calculated automatically.
    MISO_HOST: miso-controller
    MISO_PORT: 3000  # Internal port (container-to-container). MISO_PUBLIC_PORT calculated automatically.
    KEYCLOAK_HOST: keycloak
    KEYCLOAK_PORT: 8082  # Internal port (container-to-container). KEYCLOAK_PUBLIC_PORT calculated automatically.
    KEYCLOAK_PUBLIC_PORT: 8082
    DATAPLANE_HOST: dataplane
    DATAPLANE_PORT: 3001 # Internal port (container-to-container). DATAPLANE_PUBLIC_PORT calculated automatically.
    NODE_ENV: production
    PYTHONUNBUFFERED: 1
    PYTHONDONTWRITEBYTECODE: 1
    PYTHONIOENCODING: utf-8

  local:
    DB_HOST: localhost
    DB_PORT: 5432
    REDIS_HOST: localhost
    REDIS_PORT: 6379
    MISO_HOST: localhost
    MISO_PORT: 3010
    KEYCLOAK_HOST: localhost
    KEYCLOAK_PORT: 8082
    DATAPLANE_HOST: localhost
    DATAPLANE_PORT: 3011
    NODE_ENV: development
    PYTHONUNBUFFERED: 1
    PYTHONDONTWRITEBYTECODE: 1
    PYTHONIOENCODING: utf-8