# HubSpot CRM Integration

HubSpot CRM external system integration with companies, contacts, and deals

## System Information

- **System Key**: `hubspot`
- **System Type**: `openapi`
- **Datasources**: 0

## Files

- `application.yaml` – Application configuration with `app` and `externalIntegration` blocks
- `hubspot-system.json` – External system definition (authentication, OpenAPI/MCP, RBAC)
- `env.template` – Environment variables template (secrets, API keys)
- `hubspot-deploy.json` – Deployment manifest (generated by `aifabrix json`)

Optional: `rbac.yaml` – Roles and permissions merged into the system when present.

## Quick Start

### 1. Create External System

```bash
aifabrix create hubspot --type external
```

Or use the interactive wizard:

```bash
aifabrix wizard --app hubspot
```

### 2. Configure Authentication and Datasources

Edit files in `integration/hubspot/`:

- **Authentication**: `hubspot-system.yaml` (auth type, credentials placeholders)
- **Field mappings**: `hubspot-datasource-*.yaml` (dimensions, attributes, operations)

### 3. Validate Configuration

```bash
aifabrix validate hubspot --type external
```

### 4. Generate Deployment Manifest

```bash
aifabrix json hubspot --type external
```

This creates `hubspot-deploy.json` in `integration/hubspot/`.

### 5. Deploy

Controller URL and environment are read from config. Configure and log in first:

```bash
aifabrix auth config --set-controller <url> --set-environment dev
aifabrix login
```

Then deploy:

```bash
aifabrix deploy hubspot
```

## Testing

### Unit Tests (Local Validation, No API)

```bash
aifabrix test hubspot
```

### Integration Tests (Via Dataplane)

```bash
aifabrix test-integration hubspot
```

## Deployment

Deploy via miso-controller pipeline (same as regular apps). Auth and controller come from `aifabrix login` and `aifabrix auth config`:

```bash
aifabrix deploy hubspot
```

## Troubleshooting

- **Validation errors**: Run `aifabrix validate hubspot --type external` to see schema and manifest errors.
- **Deployment / auth**: Run `aifabrix auth config --set-controller <url> --set-environment <env>` and `aifabrix login` before `aifabrix deploy`.
- **File not found**: Run commands from the project root (where `package.json` and `integration/` live).
