<!-- f9bc6074-3475-45da-9250-0c673b17efaa a3c75014-eaac-469c-bba1-d73e906ef7aa -->
# AI Fabrix Builder - Create Command Implementation Plan

## Scope

**IN SCOPE:**

- Implement `aifabrix create <app>` command with full functionality
- Write comprehensive tests for the create command
- Create GitHub Actions CI/CD workflow templates
- Ensure code quality and ISO 27001 compliance for new code

**OUT OF SCOPE:**

- Fixing existing 15 failing tests (other agents working on this)
- Implementing build, run, push, deploy commands (future work)
- Fixing test coverage issues in existing code

## Task 1: Implement `aifabrix create` Command

### 1.1 Add Dependencies

**File:** `package.json`

Add interactive prompting library:

```json
"dependencies": {
  "inquirer": "^8.2.5",
  // ... existing dependencies
}
```

### 1.2 Implement Core Create Function

**File:** `lib/app.js`

Implement `createApp(appName, options)` function:

**Responsibilities:**

1. Validate app name format (lowercase, dashes only, 3-40 chars)
2. Check if `builder/<appname>/` already exists (error if exists)
3. Prompt for missing options using inquirer:

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Port (default: 3000)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Database needed? (y/n)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Redis needed? (y/n)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Storage needed? (y/n)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Authentication needed? (y/n)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Language (typescript/python)

4. Create directory structure: `builder/<appname>/`
5. Generate `variables.yaml` using template
6. Generate `env.template` with conditional variables
7. Generate `rbac.yaml` if authentication is enabled
8. Check for existing `.env` in current directory and offer to convert it
9. Display success message with next steps

**Key validations:**

- App name: `/^[a-z0-9-]{3,40}$/`
- Port: 1-65535
- Language: typescript or python

**Error handling:**

- Directory already exists
- Invalid app name format
- File write permissions
- Template file not found

### 1.3 Create YAML Template Generator

**File:** `lib/templates.js` (new file)

Create helper functions for generating YAML files:

```javascript
function generateVariablesYaml(appName, config) {
  // Generate variables.yaml content
}

function generateEnvTemplate(config) {
  // Generate env.template content with conditional sections
}

function generateRbacYaml(appName, config) {
  // Generate rbac.yaml content
}
```

### 1.4 Create .env Reader and Converter

**File:** `lib/env-reader.js` (new file)

Create utility to read existing `.env` files and convert them to templates:

**Responsibilities:**

1. Check if `.env` file exists in application folder (current directory)
2. Parse existing `.env` file (key=value format)
3. Detect sensitive values (API keys, passwords, secrets, tokens)
4. Convert sensitive values to `kv://` references
5. Keep non-sensitive values as-is
6. Merge with new parameters required by the application
7. Generate final `env.template`

**Detection patterns for sensitive values:**

- Keys containing: `PASSWORD`, `SECRET`, `KEY`, `TOKEN`, `API_KEY`, `PRIVATE`
- Values that look like: UUIDs, long random strings (>32 chars), JWTs, etc.
```javascript
function readExistingEnv(appPath) {
  // Read .env file from application folder
  // Returns parsed object or null if not found
}

function detectSensitiveValue(key, value) {
  // Determine if value should be converted to kv:// reference
  // Returns true if sensitive
}

function convertToEnvTemplate(existingEnv, requiredVars) {
  // Merge existing .env with required variables
  // Convert sensitive values to kv:// format
  // Returns env.template content
}

function generateSecretsFromEnv(envVars) {
  // Extract sensitive values for secrets.yaml
  // Returns object suitable for secrets.yaml
}
```


### 1.4 Enable Create Command

**File:** `lib/cli.js`

Uncomment and configure create command (lines 54-63):

```javascript
program.command('create <app>')
  .description('Create new application with configuration files')
  .option('-p, --port <port>', 'Application port', '3000')
  .option('-d, --database', 'Requires database')
  .option('-r, --redis', 'Requires Redis')
  .option('-s, --storage', 'Requires file storage')
  .option('-a, --authentication', 'Requires authentication/RBAC')
  .option('-l, --language <lang>', 'Runtime language (typescript/python)')
  .option('-t, --template <name>', 'Template to use')
  .action(async (appName, options) => {
    try {
      await app.createApp(appName, options);
    } catch (error) {
      handleCommandError(error, 'create');
      process.exit(1);
    }
  });
```

## Task 2: Write Comprehensive Tests

### 2.1 Test Structure

**File:** `tests/lib/app.test.js`

Update existing test file with real implementations for `createApp`:

**Test categories:**

1. **Input validation tests:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Valid app name formats
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Invalid app name formats (uppercase, special chars, too short, too long)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Port validation (valid range, invalid values)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Language validation

2. **Interactive prompts tests:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mock inquirer responses
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Test default values
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Test user input overrides flags

3. **File generation tests:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Directory creation
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - variables.yaml generation with all option combinations
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - env.template generation (with/without database, redis, storage)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - rbac.yaml generation (when auth enabled vs disabled)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Verify file contents match expected structure

4. **Error handling tests:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Directory already exists
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Invalid permissions
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Template files missing
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - YAML serialization errors

5. **Edge cases:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - No options provided (all interactive)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All options provided (no prompts)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Mixed options (some flags, some prompts)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Existing .env file conversion

**File:** `tests/lib/templates.test.js` (new file)

Test YAML template generation:

- Valid YAML output
- Correct schema compliance
- Conditional sections
- Special characters handling

### 2.2 Test Coverage Target

Ensure new code has **≥90% coverage** for:

- Statements
- Branches
- Functions
- Lines

## Task 3: GitHub Workflow Template System

### 3.1 Create GitHub Workflow Templates

**Directory:** `templates/github/`

Create Handlebars templates for GitHub Actions workflows:

**File:** `templates/github/ci.yaml.hbs`

```yaml
name: CI/CD Pipeline

on:
  push:
    branches: [{{mainBranch}}, develop]
  pull_request:
    branches: [{{mainBranch}}]

jobs:
  lint:
    name: Lint Code
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run ESLint
        run: npm run lint
      
      - name: Check for errors (warnings allowed)
        run: npm run lint 2>&1 | grep -q "0 errors" || exit 1

  test:
    name: Test Suite
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18, 20]
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js {{{{raw}}}}${{ matrix.node-version }}{{{{/raw}}}}
        uses: actions/setup-node@v4
        with:
          node-version: {{{{raw}}}}${{ matrix.node-version }}{{{{/raw}}}}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run tests with coverage
        run: npm{{#if language}} run{{/if}} test{{#if language}}:ci{{/if}}
      
{{#if uploadCoverage}}
      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info
          flags: unittests
          name: codecov-umbrella
{{/if}}

  security:
    name: Security Audit
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Run npm audit
        run: npm audit --audit-level=moderate
      
      - name: Check for vulnerabilities
        run: |
          npm audit --json > audit-report.json || true
          cat audit-report.json

{{#if buildCommand}}
  build:
    name: Build Package
    runs-on: ubuntu-latest
    needs: [lint, test]
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run build
        run: {{buildCommand}}
{{/if}}
```

**File:** `templates/github/release.yaml.hbs`

```yaml
name: Release and Publish

on:
  push:
    tags:
      - 'v*.*.*'

jobs:
  validate:
    name: Validate Release
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run all checks
        run: npm run validate
      
      - name: Verify version matches tag
        run: |
          TAG_VERSION=${{{{raw}}}}{GITHUB_REF#refs/tags/v}{{{{/raw}}}}
          PACKAGE_VERSION=$(node -p "require('./package.json').version")
          if [ "$TAG_VERSION" != "$PACKAGE_VERSION" ]; then
            echo "Tag version ($TAG_VERSION) does not match package.json version ($PACKAGE_VERSION)"
            exit 1
          fi

{{#if publishToNpm}}
  publish-npm:
    name: Publish to NPM
    runs-on: ubuntu-latest
    needs: validate
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          registry-url: 'https://registry.npmjs.org'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build package
        run: npm run build
      
      - name: Publish to NPM
        run: npm publish --access public
        env:
          NODE_AUTH_TOKEN: {{{{raw}}}}${{ secrets.NPM_TOKEN }}{{{{/raw}}}}
{{/if}}

  create-release:
    name: Create GitHub Release
    runs-on: ubuntu-latest
    needs: {{#if publishToNpm}}publish-npm{{else}}validate{{/if}}
    steps:
      - uses: actions/checkout@v4
      
      - name: Create Release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: {{{{raw}}}}${{ secrets.GITHUB_TOKEN }}{{{{/raw}}}}
        with:
          tag_name: {{{{raw}}}}${{ github.ref }}{{{{/raw}}}}
          release_name: Release {{{{raw}}}}${{ github.ref }}{{{{/raw}}}}
          body: Release {{appName}} {{{{raw}}}}${{ github.ref }}{{{{/raw}}}}
          draft: false
          prerelease: false
```

**File:** `templates/github/pr-checks.yaml.hbs`

```yaml
name: Pull Request Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  pr-validation:
    name: PR Validation
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Check file sizes
        run: |
          find {{sourceDir}} -name "*.{{fileExtension}}" -exec sh -c 'lines=$(wc -l < "$1"); if [ $lines -gt 500 ]; then echo "File $1 exceeds 500 lines ($lines)"; exit 1; fi' _ {} \;
      
      - name: Check for TODOs in modified files
        run: |
          git diff origin/{{{{raw}}}}${{ github.base_ref }}{{{{/raw}}}} --name-only | grep "\.{{fileExtension}}$" | xargs grep -n "TODO" || true
      
      - name: Validate commit messages
        run: |
          git log origin/{{{{raw}}}}${{ github.base_ref }}{{{{/raw}}}}..HEAD --format=%s | grep -E "^(feat|fix|docs|style|refactor|test|chore|perf)(\(.+\))?: .+" || echo "Warning: Some commits don't follow conventional commits"
```

### 3.2 Add GitHub Workflow Generator

**File:** `lib/github-generator.js` (new file)

Create utility to generate GitHub workflow files from templates:

```javascript
const fs = require('fs');
const path = require('path');
const Handlebars = require('handlebars');

/**
 * Generate GitHub Actions workflow files from templates
 * @param {string} appPath - Path to application directory
 * @param {Object} config - Configuration from variables.yaml
 * @param {Object} options - Generation options
 * @returns {Promise<string[]>} Array of generated file paths
 */
async function generateGithubWorkflows(appPath, config, options = {}) {
  // Create .github/workflows directory
  // Load templates from templates/github/
  // Compile with Handlebars
  // Write to .github/workflows/
  // Return list of generated files
}

/**
 * Get template context from config
 * @param {Object} config - Application configuration
 * @param {Object} options - Additional options
 * @returns {Object} Template context
 */
function getTemplateContext(config, options) {
  return {
    appName: config.app.key,
    mainBranch: options.mainBranch || 'main',
    language: config.build.language,
    fileExtension: config.build.language === 'python' ? 'py' : 'js',
    sourceDir: config.build.language === 'python' ? 'src' : 'lib',
    buildCommand: options.buildCommand || 'npm run build',
    uploadCoverage: options.uploadCoverage !== false,
    publishToNpm: options.publishToNpm || false
  };
}

module.exports = {
  generateGithubWorkflows,
  getTemplateContext
};
```

### 3.3 Update Create Command

**File:** `lib/cli.js`

Add `--github` option to create command:

```javascript
program.command('create <app>')
  .description('Create new application with configuration files')
  .option('-p, --port <port>', 'Application port', '3000')
  .option('-d, --database', 'Requires database')
  .option('-r, --redis', 'Requires Redis')
  .option('-s, --storage', 'Requires file storage')
  .option('-a, --authentication', 'Requires authentication/RBAC')
  .option('-l, --language <lang>', 'Runtime language (typescript/python)')
  .option('-t, --template <name>', 'Template to use')
  .option('-g, --github', 'Generate GitHub Actions workflows')
  .option('--main-branch <branch>', 'Main branch name for workflows', 'main')
  .action(async (appName, options) => {
    try {
      await app.createApp(appName, options);
    } catch (error) {
      handleCommandError(error, 'create');
      process.exit(1);
    }
  });
```

### 3.4 Integration in createApp

**File:** `lib/app.js`

Update `createApp()` to call GitHub workflow generator when `--github` flag is present:

```javascript
async function createApp(appName, options = {}) {
  // ... existing create logic ...
  
  // Generate GitHub workflows if requested
  if (options.github) {
    const githubGen = require('./github-generator');
    const workflowFiles = await githubGen.generateGithubWorkflows(
      process.cwd(),
      config,
      {
        mainBranch: options.mainBranch || 'main',
        uploadCoverage: true,
        publishToNpm: options.template === 'platform' // Only for platform apps
      }
    );
    
    console.log('✓ Generated GitHub Actions workflows:');
    workflowFiles.forEach(file => console.log(`  - ${file}`));
  }
  
  // ... success message ...
}

## Task 4: Update Documentation

### 4.1 Update CLI Reference

**File:** `docs/CLI-REFERENCE.md`

Update the `create` command section with complete implementation details:

- Add all flags including `--github` and `--main-branch`
- Document interactive prompts
- Add examples with GitHub workflow generation
- Document .env file conversion behavior
- Add troubleshooting section for create command

### 4.2 Update Quick Start Guide

**File:** `docs/QUICK-START.md`

Update Step 3 to show:
- Both interactive and flag-based usage
- Example with `--github` flag
- What files get created in each scenario
- Note about existing .env file detection

### 4.3 Update Configuration Guide

**File:** `docs/CONFIGURATION.md`

Add section about:
- How .env files are converted to env.template
- Sensitive value detection patterns
- Manual conversion if needed

### 4.4 Add GitHub Workflows Documentation

**File:** `docs/GITHUB-WORKFLOWS.md` (new file)

Create comprehensive guide about:
- What workflows are generated
- How to customize workflows
- Required GitHub secrets (NPM_TOKEN, etc.)
- Template variables and options
- Examples for TypeScript and Python projects

## Task 5: Supporting Files

### 5.1 .npmignore

**File:** `.npmignore` (new file)

```

# Test files

tests/

coverage/

*.test.js

jest.config.js

# Development files

.github/

builder/

docs/

*.md

!README.md

!LICENSE

# IDE

.vscode/

.idea/

# CI

.cursorrules

.eslintrc.json

````

### 4.2 CHANGELOG.md

**File:** `CHANGELOG.md` (new file)

```markdown
# Changelog

All notable changes to this project will be documented in this file.

## [2.0.0] - 2025-01-XX

### Added
- Initial release of AI Fabrix Builder SDK
- Infrastructure management commands (up, down, doctor, status, restart)
- Application creation command with interactive prompts
- Secrets management with kv:// references
- JSON deployment manifest generation
- Comprehensive documentation suite

### Security
- ISO 27001 compliant implementation
- No hardcoded secrets
- Proper access controls
- Audit logging for all operations
````

## Implementation Order

1. **Add inquirer dependency** (package.json)
2. **Create templates.js module** with YAML generators
3. **Implement createApp() function** in app.js
4. **Enable create command** in cli.js
5. **Write comprehensive tests** for create functionality
6. **Create GitHub Actions workflows** (ci.yml, release.yml, pr-checks.yml)
7. **Create supporting files** (.npmignore, CHANGELOG.md)
8. **Manual testing** of create command

## Quality Standards (ISO 27001)

### Code Quality

- Maximum 500 lines per file
- Maximum 50 lines per function
- Clear function documentation
- Error handling for all operations
- Input validation and sanitization

### Testing

- All new functions must have tests
- Test coverage ≥ 90% for new code
- Tests in separate tests/ directory
- Mock external dependencies

### Security

- No hardcoded secrets
- Validate all user inputs
- Sanitize file paths
- Proper error messages (no sensitive data)
- Audit trail (log file creation events)

## Acceptance Criteria

1. **Create command works end-to-end:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - `aifabrix create myapp` launches interactive prompts
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - `aifabrix create myapp --port 3000 --database --language typescript` works without prompts
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Creates proper directory structure
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Generated files validate against schemas
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Success message shows next steps

2. **Tests for create command:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All validation scenarios covered
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All generation scenarios covered
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All error conditions handled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Coverage ≥ 90% for new code

3. **GitHub Actions workflows:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - CI workflow runs on push/PR
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Release workflow triggers on version tags
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - PR checks validate file sizes and conventions
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All workflows use Node 18+ matrix

4. **Code quality:**

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - No files exceed 500 lines
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - No functions exceed 50 lines
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - All ESLint warnings addressed or documented as acceptable
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                - Proper JSDoc comments

## Notes

- Use inquirer v8.x (latest with CommonJS support)
- Generate YAML using js-yaml (already in dependencies)
- Use Handlebars for any text templates (already in dependencies)
- Follow existing code patterns from infra.js and secrets.js
- Console output is acceptable in CLI code (ESLint warnings OK)

### To-dos

- [ ] Fix 15 failing tests in validator.test.js and infra.test.js (timeouts, mocking issues)
- [ ] Implement createApp() function with interactive prompts and file generation
- [ ] Implement buildApp(), detectLanguage(), and generateDockerfile() functions
- [ ] Implement runApp() function with docker-compose generation and health checks
- [ ] Add tests to reach 80% coverage threshold for all modules
- [ ] Create GitHub Actions workflows for CI/CD and npm publication
- [ ] Complete pre-publication checklist and manual smoke testing
- [ ] Implement pushApp() and deployApp() functions for Azure deployment (post-MVP)